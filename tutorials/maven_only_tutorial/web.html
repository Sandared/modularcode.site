<!DOCTYPE html>
<html lang="en"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
    <title>A Web Application</title>
    <meta name="description" content="A Web Application" />
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen,projection" href="/assets/materialize.css" />
    <link rel="canonical" href="http://localhost:4000/tutorials/maven_only_tutorial/web.html" />
    <link rel="alternate" type="application/rss+xml" title="modularcode" href="/feed.xml" />
    
</head>
<!-- Is it a content or a nested page -->
	
	
	
	<style>a {color: #757575;fill:#424242;font-weight:450;}a:hover {color: #03a9f4;fill:#03a9f4;}h1,h2,h3,h4,h5,h6{color: #424242;}body{color: #212121; display: flex; min-height: 100vh; flex-direction: column;}nav ul a{color: #424242;}nav .brand-logo{color: #424242}.justify-align{text-align:justify;}nav a{color: #424242;}main{flex: 1 0 auto;}.side-nav li>a{color: #424242;}.side-nav .collapsible-header, .side-nav.fixed .collapsible-header{padding-left:32px;}.side-nav .collapsible-body li a, .side-nav.fixed .collapsible-body li a{padding-left:47px;}h1,h2,h3,h4,h5,h6{-webkit-font-smoothing: antialiased;}.icon-block{padding: 0 15px;}.icon-block .material-icons{font-size: inherit;}.row{margin-bottom:0px;}.logo img{padding-top:3px;}.page-footer{background-color:#03a9f4; padding-top: 0px;}.nav-button{width:20px; height:20px; viewBox:0 0 20 20;}footer h5{color:#FFFFFF;}hr{background-color:#bdbdbd;}.divider{background-color:#bdbdbd;}img{max-width: 100%; height: auto;}.page-footer .footer-copyright{background-color:#03a9f4;}/* Code Highlighting */.highlight .c { color: #bdbdbd; font-style: italic } /* Comment */.highlight .k { color: #212121; font-weight: bold } /* Keyword */.highlight .cm { color: #bdbdbd; font-style: italic } /* Comment.Multiline */.highlight .c1 { color: #bdbdbd; font-style: italic } /* Comment.Single */.highlight .kc { color: #424242; font-weight: bold } /* Keyword.Constant */.highlight .kd { color: #212121; font-weight: bold } /* Keyword.Declaration */.highlight .kn { color: #424242; font-weight: bold } /* Keyword.Namespace */.highlight .kp { color: #424242; font-weight: bold } /* Keyword.Pseudo */.highlight .kr { color: #424242; font-weight: bold } /* Keyword.Reserved */.highlight .kt { color: #424242; font-weight: bold } /* Keyword.Type */.highlight .s { color: #757575 } /* Literal.String */.highlight .n { color: #03a9f4 } /* Name */.highlight .na { color: #03a9f4 } /* Name.Attribute */.highlight .nc { color: #03a9f4} /* Name.Class */.highlight .nd { color: #757575 } /* Name.Decorator */.highlight .nf { color: #03a9f4 } /* Name.Function */.highlight .mf { color: #757575 } /* Literal.Number.Float */.highlight .mh { color: #757575 } /* Literal.Number.Hex */.highlight .mi { color: #757575 } /* Literal.Number.Integer */.highlight .mo { color: #757575 } /* Literal.Number.Oct */.highlight .sb { color: #757575 } /* Literal.String.Backtick */.highlight .sc { color: #757575 } /* Literal.String.Char */.highlight .sd { color: #757575 } /* Literal.String.Doc */.highlight .s2 { color: #757575 } /* Literal.String.Double */.highlight .se { color: #757575 } /* Literal.String.Escape */.highlight .sh { color: #757575 } /* Literal.String.Heredoc */.highlight .si { color:#757575 } /* Literal.String.Interpol */.highlight .sx { color: #757575 } /* Literal.String.Other */.highlight .sr { color: #757575 } /* Literal.String.Regex */.highlight .s1 { color: #757575 } /* Literal.String.Single */.highlight .ss { color: #757575 } /* Literal.String.Symbol */.highlight {tab-size: 4;}div.highlighter-rouge{padding:5px;background:#f5f5f5;border:1px solid #bdbdbd;border-radius:4px;}div.highlight pre.highlight{margin:0px;}code.highlighter-rouge{padding:0px 3px;background:#f5f5f5;border:1px solid #bdbdbd;border-radius:3px;}/* Make headers a little bit smaller */h1{font-size:2.8rem;}h2{font-size:2.5rem;}h3{font-size:2.1rem;}h4{font-size:1.8rem;}h5{font-size:1.3rem;}h6{font-size:1rem;}/* Plain text */p{text-align:justify;}/* Blockquotes */blockquote{border-left:3px solid #03a9f4;font-style:italic;font-weight:300;}/* Tables */table.striped>tbody>tr:nth-child(odd){background-color:#f5f5f5;}/* Cards */.card .card-image .card-title{color: #212121; font-weight: 600; padding-bottom: 0px; padding-left:12px; padding-right: 12px;}.card-content{color: #757575;}.card .card-content{padding-top: 5px;}.card .card-action a:not(.btn):not(.btn-large):not(.btn-large):not(.btn-floating){color: #424242;}.card .card-action a:not(.btn):not(.btn-large):not(.btn-large):not(.btn-floating):hover{color: #03a9f4;}.card.small{height: 225px;}.card-placeholder-image{color:#bdbdbd;}.card-image img{opacity: 0.3;}.card-image h2{opacity: 0.3;}.card .card-image{min-height:60%;}/* Breadcrumbs */nav{background-color: #FFFFFF;}a.breadcrumb{color: #757575;}.breadcrumb:last-child{color:#03a9f4;}.breadcrumb:before{color:#757575;font-size:15px;}nav.breadcrumbs{box-shadow:none;margin-top:4px;}ul.collapsible{list-style-type: none;padding:0px;}.collapsible-header{border-bottom:0px;}.collapsible-body{padding:5px;}/* Table of Contents */.second-level{padding:0px;}.table-of-contents .second-level a{padding-left:40px;font-size:13px;}.table-of-contents a{color:#757575;}.table-of-contents a:hover{border-left:1px solid #03a9f4;color:#03a9f4;}.table-of-contents a.active{border-left:2px solid #03a9f4;color:#757575;}.toc-wrapper li{padding:1px;}/* Navigation Arrows */.prev-nav{top: 50%;left: 3%;position:fixed;}.next-nav{top: 50%;right: 3%;position:fixed;}</style>

  <body>
	<!-- Navigation Header -->
	<nav class="white lighten-1" role="navigation">
	<div class="nav-wrapper container">
		<a id="logo-container" class="brand-logo logo show-on-medium-and-up hide-on-small-only" href="/"><img src="/logo.png"></a>
		<a id="logo-container" class="brand-logo logo show-on-small hide-on-med-and-up" href="/"><img src="/logo-small.png"></a>
	  
	  
	
	  <ul class="right hide-on-med-and-down">
		
			
			<li><a href="/tutorials.html">Tutorials</a></li>
		
			
			<li><a href="/modules.html">Modules</a></li>
		
			
			<li><a href="/projects.html">Projects</a></li>
		
			
			<li><a href="/contribute.html">Contribute</a></li>
		
		
			<li>
				<a title="modularcode.site on GitHub" href="https://github.com/Sandared/modularcode.site"> 
					<svg class="nav-button" xmlns="http://www.w3.org/2000/svg">
						<title>github</title>
						<path d="M10 0C4.477 0 0 4.477 0 10c0 4.418 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.268 2.75 1.026A9.578 9.578 0 0 1 10 4.836c.85.004 1.705.114 2.504.337 1.909-1.294 2.747-1.026 2.747-1.026.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.579.688.481C17.137 18.163 20 14.418 20 10c0-5.523-4.478-10-10-10" fill-rule="evenodd">
						</path>
					</svg>					
				</a>
			</li>
		
		
		
			<li>
				<a title="modularco_de on Twitter" href="https://twitter.com/modularco_de"> 
					<svg class="nav-button" xmlns="http://www.w3.org/2000/svg">
						<title>twitter</title>
						<path d="M15.115 7.788c.005.11.009.223.009.335 0 3.43-2.611 7.384-7.386 7.384-1.467 0-2.831-.43-3.98-1.166a5.244 5.244 0 0 0 3.843-1.075 2.596 2.596 0 0 1-2.424-1.801 2.645 2.645 0 0 0 1.171-.045 2.597 2.597 0 0 1-2.082-2.544v-.033c.351.194.752.311 1.177.324a2.59 2.59 0 0 1-1.154-2.16c0-.475.127-.92.35-1.305A7.37 7.37 0 0 0 9.99 8.414a2.596 2.596 0 0 1 4.423-2.367 5.174 5.174 0 0 0 1.648-.63 2.602 2.602 0 0 1-1.142 1.436 5.17 5.17 0 0 0 1.491-.41 5.233 5.233 0 0 1-1.295 1.345M10 0C4.486 0 0 4.486 0 10s4.486 10 10 10 10-4.486 10-10S15.514 0 10 0" fill-rule="evenodd">
						</path>
					</svg>			
				</a>
			</li>
		
	  </ul>

	  <ul id="nav-mobile" class="side-nav">
		<li><a href="http://localhost:4000">Home</a></li>
		<li class="divider"></li>
		
			
			<li><a href="/tutorials.html">Tutorials</a></li>
			<li class="divider"></li>
		
			
			<li><a href="/modules.html">Modules</a></li>
			<li class="divider"></li>
		
			
			<li><a href="/projects.html">Projects</a></li>
			<li class="divider"></li>
		
			
			<li><a href="/contribute.html">Contribute</a></li>
			<li class="divider"></li>
		
		
			<li>
				<a title="modularcode.site on GitHub" href="https://github.com/Sandared/modularcode.site"> 
					<svg class="nav-button" xmlns="http://www.w3.org/2000/svg">
						<title>github</title>
						<path d="M10 0C4.477 0 0 4.477 0 10c0 4.418 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.268 2.75 1.026A9.578 9.578 0 0 1 10 4.836c.85.004 1.705.114 2.504.337 1.909-1.294 2.747-1.026 2.747-1.026.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.579.688.481C17.137 18.163 20 14.418 20 10c0-5.523-4.478-10-10-10" fill-rule="evenodd">
						</path>
					</svg>					
				</a>
			</li>
			<li class="divider"></li>
		
		
		
			<li>
				<a title="modularco_de on Twitter" href="https://twitter.com/modularco_de"> 
					<svg class="nav-button" xmlns="http://www.w3.org/2000/svg">
						<title>twitter</title>
						<path d="M15.115 7.788c.005.11.009.223.009.335 0 3.43-2.611 7.384-7.386 7.384-1.467 0-2.831-.43-3.98-1.166a5.244 5.244 0 0 0 3.843-1.075 2.596 2.596 0 0 1-2.424-1.801 2.645 2.645 0 0 0 1.171-.045 2.597 2.597 0 0 1-2.082-2.544v-.033c.351.194.752.311 1.177.324a2.59 2.59 0 0 1-1.154-2.16c0-.475.127-.92.35-1.305A7.37 7.37 0 0 0 9.99 8.414a2.596 2.596 0 0 1 4.423-2.367 5.174 5.174 0 0 0 1.648-.63 2.602 2.602 0 0 1-1.142 1.436 5.17 5.17 0 0 0 1.491-.41 5.233 5.233 0 0 1-1.295 1.345M10 0C4.486 0 0 4.486 0 10s4.486 10 10 10 10-4.486 10-10S15.514 0 10 0" fill-rule="evenodd">
						</path>
					</svg>			
				</a>
			</li>
			<li class="divider"></li>
		
	  </ul>        

	  <a data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
	</div>
</nav>
	
	
	
  <main>	
  <div class="container">
		<div class="row">	
		
			<div id="text-content" class="section col s12 l10">
				


<nav class="breadcrumbs">
	<div class="nav-wrapper">
	
	
		
	
		
			
			
			
			
			
							
				
				
							
				
				
							
				
				
							
				
				
							
				
				
							
				
				
			
				
					
					<a href="http://localhost:4000/tutorials.html" class="breadcrumb">Tutorials</a>
				
			
		
	
		
			
			
			
			
			
							
				
				
							
				
				
							
				
				
							
				
				
							
				
				
							
				
				
					
				
				<a href="http://localhost:4000/tutorials/maven_only_tutorial.html" class="breadcrumb">Maven ONLY Tutorial</a>
				
			
		
	
		
			
			
			
			
			
							
				
				
							
				
				
							
				
				
							
				
				
							
				
				
							
				
				
					
				
				<a href="http://localhost:4000/tutorials/maven_only_tutorial/web.html" class="breadcrumb">A Web Application</a>
				
			
		
	
	</div>
</nav>

				<h1 id="a-web-application">A Web Application</h1>

<h2 id="what-you-will-learn-in-this-section">What You Will Learn in this Section</h2>

<p>So far we’ve been able to test our expression evaluator with the Gogo command shell. In
this section we create a small web application that calls the evaluator from the
web.</p>

<p>We will create a small GUI in HTML 5 and Javascript based on Angular that uses
the OSGi enRoute simple REST facility to call the evaluator service.</p>

<p>For many Java developers, Javascript, CSS, and HTML 5 are foreign and scary. However, this example requires very little knowledge of these resources. And won’t you admit that it’s cool to write something you can show your girl/boy friend without getting blank stares? If you’re absolutely not interested in web applications then you can skip this section.</p>

<p><img src="img/application-diagram.png" alt="API Diagram" /></p>

<p>Make sure you are in the top directory:</p>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd ~/workspaces/osgi.enroute.examples.eval
</code></pre></div></div>

<h2 id="project">Project</h2>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>osgi.enroute.examples.eval $ mkdir application
osgi.enroute.examples.eval $ cd application
application $ vi pom.xml
// edit pom
</code></pre></div></div>

<p>The pom for this project looks like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;project 
	xmlns="http://maven.apache.org/POM/4.0.0" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	
	&lt;parent&gt;
		&lt;groupId&gt;org.osgi&lt;/groupId&gt;
		&lt;artifactId&gt;osgi.enroute.examples.eval&lt;/artifactId&gt;
		&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
	&lt;/parent&gt;
	
	&lt;artifactId&gt;osgi.enroute.examples.eval.application&lt;/artifactId&gt;
	&lt;description&gt;A web application to evaluate expressions&lt;/description&gt;
	
	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.osgi&lt;/groupId&gt;
			&lt;artifactId&gt;osgi.enroute.examples.eval.api&lt;/artifactId&gt;
			&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
			&lt;scope&gt;compile&lt;/scope&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
&lt;/project&gt;
</code></pre></div></div>

<h2 id="the-application-java-source-code">The Application Java Source Code</h2>

<p>Our application class must provide access to the expression evaluator via REST.
For this reason, there is a simple REST provider that leverages the OSGi model. The
primary purpose of this support is to make it trivially easy to call Java code
running in OSGi as a service from a Javascript application.</p>

<p>The secondary purpose of the application class is to act as a <em>root</em> for the 
requirements graph. It defines a number of requirements that cannot be analyzed 
from the code. We add those requirements using annotations. These annotations
will then be converted to OSGi requirements by bnd.</p>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>application $ mkdir -p src/main/java/osgi/enroute/examples/eval/application
application $ vi src/main/java/osgi/enroute/examples/eval/application/EvalApplication.java
// Add the source code
</code></pre></div></div>

<p>The source code is:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">osgi</span><span class="o">.</span><span class="na">enroute</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">eval</span><span class="o">.</span><span class="na">application</span><span class="o">;</span>
	
<span class="kn">import</span> <span class="nn">org.osgi.service.component.annotations.Component</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.osgi.service.component.annotations.Reference</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">osgi.enroute.configurer.api.RequireConfigurerExtender</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">osgi.enroute.examples.eval.api.Eval</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">osgi.enroute.google.angular.capabilities.RequireAngularWebResource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">osgi.enroute.rest.api.REST</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">osgi.enroute.twitter.bootstrap.capabilities.RequireBootstrapWebResource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">osgi.enroute.webserver.capabilities.RequireWebServerExtender</span><span class="o">;</span>

<span class="nd">@RequireAngularWebResource</span><span class="o">(</span><span class="n">resource</span><span class="o">={</span><span class="s">"angular.js"</span><span class="o">,</span><span class="s">"angular-resource.js"</span><span class="o">,</span> <span class="s">"angular-route.js"</span><span class="o">},</span> <span class="n">priority</span><span class="o">=</span><span class="mi">1000</span><span class="o">)</span>
<span class="nd">@RequireBootstrapWebResource</span><span class="o">(</span><span class="n">resource</span><span class="o">=</span><span class="s">"css/bootstrap.css"</span><span class="o">)</span>
<span class="nd">@RequireWebServerExtender</span>
<span class="nd">@Component</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"osgi.enroute.examples.eval"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EvalApplication</span> <span class="kd">implements</span> <span class="n">REST</span> <span class="o">{</span>

	<span class="nd">@Reference</span>
	<span class="n">Eval</span> <span class="n">eval</span><span class="o">;</span>
	
	<span class="kd">public</span> <span class="kt">double</span> <span class="nf">getEval</span><span class="o">(</span><span class="n">String</span> <span class="n">string</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">eval</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="n">string</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>A short explanation of the annotations:</p>

<ul>
  <li><code class="highlighter-rouge">@RequireAngularWebResource</code> – Instead of listing Javascript and CSS dependencies 
in the <code class="highlighter-rouge">index.html</code> file we can define what gets included with the annotation. This
provides for a single definition of what resources should be included. This
Angular annotation includes the angular Javascript resources.</li>
  <li><code class="highlighter-rouge">@RequireBootstrapWebResource</code> – Includes the Bootstrap CSS</li>
  <li><code class="highlighter-rouge">@RequireWebServerExtender</code> – The <a href="/services/osgi.enroute.webserver.capabilities.html">Webserver</a> extender makes it easy to provide static
context. It also provides the runtime support for the web resources.</li>
</ul>

<h2 id="the-gui">The GUI</h2>

<p>We want the application to look like:</p>

<p><img src="img/app-0.png" alt="The application" /></p>

<h3 id="about-angular">About Angular</h3>

<p>For many Java developers the web is a scary place. In OSGi enRoute we chose Angular
for the GUI not expecting every Java OSGi developer to jump on that band wagon (this
band wagon changes every 3 months anyway) but it allows very simple powerful and scalable
applications.</p>

<p>The key concept of Angular is that it updates the GUI directly from the Javascript
variables. This allows very clean separation between the business logic, the traditional model, 
and the GUI. The GUI itself is modeled with HTML 5 and also often contains logic. However,
this view/control logic should be restricted to the control and view aspects and not contain
business logic.</p>

<h3 id="about-html-5">About HTML 5</h3>

<p>Most Java developers still consider HTML to be a variant of XML. It is not, it is much
more relaxed. In many cases it is not necessary to quote attribute values and 
many tags are not required to be closed. Though this sounds offensive to people
used to XML it is actually more readable and sometimes not closing a tag
prevents accidental whitespace between tags to kill a carefully crafted layout.</p>

<h2 id="static-web-content">Static Web Content</h2>

<p>The OSGi enRoute webserver bundle will map any directory named <code class="highlighter-rouge">static</code> in a bundle to the
web server’s root. In OSGi enRoute applications, the convention is to use the fully
qualified name of the application as the root. This content is generally not accessed 
directly except for the <code class="highlighter-rouge">index.html</code> file in this directory. We therefore have the following 
static web resource files:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>static/
	osgi.enroute.examples.eval/
		index.html
		favicon.ico
		htm/
			main/
				about.htm
				home.htm
</code></pre></div></div>

<h3 id="indexhtml">index.html</h3>

<p>The <code class="highlighter-rouge">index.html</code> file is the root of our Javascript application. It is an Angular
application. It uses URL based routing, this makes it slightly more complex than 
the absolute simplest Angular application but it then makes turning it into something
useful much harder.</p>

<p>In the <code class="highlighter-rouge">index.html</code> file we are using <a href="http://bnd.bndtools.org/chapters/850-macros.html"><em>macros</em></a> and/or properties. We therefore need to 
let bnd <em>expand</em> the file. This is needed because the web resources use the Bundle
Symbolic Name and the actual version used in the bundle, which might differ slightly from
the Maven version.</p>

<p>The <code class="highlighter-rouge">index.html</code> should be stored in <code class="highlighter-rouge">src/main/resources/static/osgi.enroute.examples.eval/index.html</code>, this
will make it available on the web server under <code class="highlighter-rouge">/osgi.enroute.examples.eval/index.html</code>.</p>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>application $ mkdir -p src/main/resources/static/osgi.enroute.examples.eval
application $ vi src/main/resources/static/osgi.enroute.examples.eval/index.html
// add the subsequent content
</code></pre></div></div>

<p>The first part of the index.html  file is quite straightforward HTML 5 code made compatible with
the Internet Explorer quirks.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;head&gt;</span>
		<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
		<span class="c">&lt;!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries --&gt;</span>
		<span class="c">&lt;!--[if lt IE 9]&gt;
		      &lt;script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"&gt;&lt;/script&gt;
		      &lt;script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"&gt;&lt;/script&gt;
	    &lt;![endif]--&gt;</span>
		<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"description"</span> <span class="na">content=</span><span class="s">""</span><span class="nt">&gt;</span>
		<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"author"</span> <span class="na">content=</span><span class="s">""</span><span class="nt">&gt;</span>
		
		<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"icon"</span> <span class="na">href=</span><span class="s">/osgi.enroute.examples.eval/favicon.ico"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;title&gt;</span>OSGi ENROUTE EXAMPLE APPLICATION<span class="nt">&lt;/title&gt;</span>
</code></pre></div></div>

<p>The following link will include the CSS that the application needs. The CSS (in our
case Bootstrap) was indicated by the @RequireBootstrap annotation on the application
class. The <code class="highlighter-rouge">/osgi.enroute.webresource/</code> URL is mapped to a servlet that will be able
to find all the required web resources for the given Bundle-SymbolicName and Bundle Version.
The ${bsn} macro and ${Bundle-Version} macro are expanded by bnd.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		&lt;link 
			rel	="stylesheet" 
			type="text/css"
			href="/osgi.enroute.webresource/${bsn}/${Bundle-Version}/*.css"
		&gt;
	
	&lt;/head&gt;
</code></pre></div></div>

<p>Angular requires an <code class="highlighter-rouge">ng-app</code> attribute for the name of the application.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	&lt;body ng-app="osgi.enroute.examples.eval"&gt;
</code></pre></div></div>

<p>We use Bootstrap to create a container for the content.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		&lt;div class="container"&gt;

			&lt;div class="header"&gt;
</code></pre></div></div>

<p>The first part is a navigation bar where we have our 2 views listed. The Home view is our application,
executing an expression evaluation. The second one is an About window. We use the URL
routing mechanism to go to the right view.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>				&lt;ul class="nav nav-pills pull-right"&gt;
					&lt;li 
						ng-class="{active: page() == '/'}"&gt;
							&lt;a href="#/"&gt;Home&lt;/a&gt;
					&lt;li ng-class="{active: page() == '/about'}"&gt;
						&lt;a href="#/about"&gt;About&lt;/a&gt;
				&lt;/ul&gt;
				
				&lt;h3 
					class="text-muted"&gt;
						OSGi enRoute Example Application
				&lt;/h3&gt;
</code></pre></div></div>

<p>A simple alert area. This allows us to report errors like communication errors. We add
a close button to remove the alerts one by one.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>				&lt;div 
					ng-repeat		="alert in alerts" 
					
					class			="alert alert-{{alert.type || 'alert'}} alert-dismissible"&gt;
					
					
					
					
					&lt;button 
						type="button" 
						ng-click='closeAlert($index)' 
						class="close pull-right"&gt;
						&lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;&lt;span class="sr-only"&gt;Close&lt;/span&gt;
					&lt;/button&gt;
				&lt;/div&gt;
				
			&lt;/div&gt;
</code></pre></div></div>

<p>This is the Angular magic. This element will be replaced by the content (<code class="highlighter-rouge">htm/main/home.htm</code> or <code class="highlighter-rouge">htm/main/about.htm</code>)
depending on the URL.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  		&lt;div ng-view&gt;
	  		&lt;/div&gt;  	
</code></pre></div></div>

<p>A simple footer. If you set the Bundle-Vendor header in the bnd.bnd file then it will be used here. Otherwise
it will use the generic <code class="highlighter-rouge">Company</code> title. Also note how we can use the build time stamp. You can use
any bnd <a href="http://bnd.bndtools.org/chapters/850-macros.html">Macro</a>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>			&lt;div class="footer"&gt;
				&lt;p&gt;&amp;copy; ${def;Bundle-Vendor;Company} ${tstamp;YYYY}&lt;/p&gt;
			&lt;/div&gt;
	
		&lt;/div&gt;
</code></pre></div></div>

<p>This is where the magic happens for Javascript web resources. We include any resource that ends
with .js that has been required by the bundle. At the end, also the content of the <code class="highlighter-rouge">web</code> directory
in the bundle is appended.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		&lt;script src="/osgi.enroute.webresource/${bsn}/${Bundle-Version}/*.js"&gt;&lt;/script&gt;

	&lt;/body&gt;
&lt;/html&gt;
</code></pre></div></div>

<p>To replace the bnd macros with their value we must tell bnd to pre-process the resource. We therefore
need to create a bnd.bnd file:</p>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>application $ vi bnd.bnd
// Add content
</code></pre></div></div>

<p>This  requires the following line in the <code class="highlighter-rouge">bnd.bnd</code> file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-includeresource: \
	{static/osgi.enroute.examples.eval/index.html=src/main/resources/static/osgi.enroute.examples.eval/index.html}
</code></pre></div></div>

<h2 id="the-views">The Views</h2>

<p>The app has two views. They are stored in <code class="highlighter-rouge">src/main/resources/static/osgi.enroute.examples.eval/main/htm</code>.</p>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>application $ mkdir -p src/main/resources/static/osgi.enroute.examples.eval/main/htm
</code></pre></div></div>

<h2 id="home">Home</h2>

<p>The <code class="highlighter-rouge">home.htm</code> is the main view.</p>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>application $ vi src/main/resources/static/osgi.enroute.examples.eval/htm/main/home.htm
// add the content
</code></pre></div></div>

<p>It looks like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;section 
	ng-cloak 
	style="min-height:500px"&gt;

	&lt;p&gt;Enter an arithmetic expression like &lt;code&gt;sin(pi)&lt;/code&gt;
	
	&lt;div 
		class="input-group"&gt;
</code></pre></div></div>

<p>The input field for the expression.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	   &lt;input 
	   	type="text" 
	   	ng-model=expression 
	   	class="form-control"&gt;
	   		&lt;span class="input-group-btn"&gt;
	        &lt;button class="btn btn-default" type="button" ng-click=eval(expression)&gt;
	        	Eval!
	        &lt;/button&gt;
	   &lt;/span&gt;
	&lt;/div&gt;
	
	&lt;hr&gt;
	
	&lt;div style="min-height:500px"&gt;
</code></pre></div></div>

<p>Prints all the answers</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		&lt;div ng-repeat="i in answers track by $index"&gt;
			
			{{i}}
			
		&lt;/div&gt;
		
	&lt;/div&gt;
&lt;/section&gt;
</code></pre></div></div>

<h2 id="about">About</h2>

<p>A simple about box.</p>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>application $ vi src/main/resources/static/osgi.enroute.examples.eval/htm/main/about.htm
// add the content
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;section&gt;
	&lt;h1&gt;About&lt;/h1&gt;
	&lt;p&gt;This is a demo application to demonstrate how to build OSGi enRoute Applications with 
	Maven/M2E
	&lt;p&gt;
&lt;/section&gt;
</code></pre></div></div>

<h2 id="the-javascript-code">The Javascript Code</h2>

<p>The Javascript code must be placed in a directory in the <code class="highlighter-rouge">src/resources/main/web</code>. Any
content in this directory is treated as a web resource and automatically included
in the <code class="highlighter-rouge">index.html</code> page. The name of the files is irrelevant but the extension is
since the selection in the index.html file takes place on extension.</p>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>application $ mkdir -p src/main/resources/web
</code></pre></div></div>

<h3 id="mainjs">main.js</h3>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>application $ vi src/main/resources/web/main.js
// add the content
</code></pre></div></div>

<p>We create a Javascript ‘module’. This is an anonymous function.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s1">'use strict'</span><span class="p">;</span>
<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</code></pre></div></div>

<p>We now create an Angular module. The name of the module must match the <code class="highlighter-rouge">ng-app</code>
attribute in the <code class="highlighter-rouge">index.html</code> file.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">MODULE</span> <span class="o">=</span> 
	<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'osgi.enroute.examples.eval'</span><span class="p">,</span> <span class="p">[</span> <span class="s1">'ngRoute'</span> <span class="p">]</span> <span class="p">);</span>
</code></pre></div></div>

<p>The next section configures the routing table. The routing table matches a pattern
in the URL and then selects the content of the <code class="highlighter-rouge">ng-view</code> element in the <code class="highlighter-rouge">index.html</code>
page.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">MODULE</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$routeProvider</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">$routeProvider</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">{</span> <span class="na">controller</span><span class="p">:</span> <span class="nx">mainProvider</span><span class="p">,</span> <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'/osgi.enroute.examples.eval/htm/main/home.htm'</span><span class="p">});</span>
	<span class="nx">$routeProvider</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/about'</span><span class="p">,</span> <span class="p">{</span> <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'/osgi.enroute.examples.eval/htm/main/about.htm'</span><span class="p">});</span>
	<span class="nx">$routeProvider</span><span class="p">.</span><span class="nx">otherwise</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Initialize when the module is ready to run. We add the data structure to hold the alerts and provide
access to the current page name for the nav bar.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">MODULE</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$rootScope</span><span class="p">,</span> <span class="nx">$location</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">$rootScope</span><span class="p">.</span><span class="nx">alerts</span> <span class="o">=</span> <span class="p">[];</span>
	<span class="nx">$rootScope</span><span class="p">.</span><span class="nx">closeAlert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">$rootScope</span><span class="p">.</span><span class="nx">alerts</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="p">};</span>
	<span class="nx">$rootScope</span><span class="p">.</span><span class="nx">page</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">$location</span><span class="p">.</span><span class="nx">path</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>A list of answers, i.e. the history.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">answers</span> <span class="o">=</span> <span class="p">[</span> <span class="p">];</span>
</code></pre></div></div>

<p>This <em>controller</em> is called when the URL ends in <code class="highlighter-rouge">#home</code>. We set the history and add
an <code class="highlighter-rouge">eval</code> method. This method will call the server. If we receive an answer, we
add it to the history. Angular will then make sure it gets printed.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">mainProvider</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$http</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">$scope</span><span class="p">.</span><span class="nx">answers</span><span class="o">=</span><span class="nx">answers</span><span class="p">;</span>
		
		<span class="nx">$scope</span><span class="p">.</span><span class="kr">eval</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expr</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">$http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s1">'/rest/eval/'</span><span class="o">+</span><span class="nx">expr</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span>
						<span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
							<span class="nx">answers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">data</span> <span class="o">+</span> <span class="s2">" = "</span> <span class="o">+</span> <span class="nx">expr</span><span class="p">);</span>
						<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
							<span class="nx">$scope</span><span class="p">.</span><span class="nx">alerts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'danger'</span><span class="p">,</span> <span class="na">msg</span><span class="p">:</span> <span class="s1">'Failed with ['</span><span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">status</span> <span class="o">+</span> <span class="s1">'] '</span><span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">statusText</span> <span class="p">});</span>
						<span class="p">}</span>
				<span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
	
<span class="p">})();</span>
</code></pre></div></div>

<h2 id="building">Building</h2>

<p>You should add the application module to the parent pom and then build the bundle:</p>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>application $ vi ../pom.xml
// add application module
application $ mvn install
...
</code></pre></div></div>

<h2 id="running">Running</h2>

<p>To run this application we need to add this bundle to the bndrun file. This requires
the following steps in the bndrun project.</p>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>application $ cd ../bndrun
bndrun $ vi pom.xml
// edit the dependencies section
</code></pre></div></div>

<p>The dependencies section should look like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;dependencies&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;org.osgi&lt;/groupId&gt;
		&lt;artifactId&gt;osgi.enroute.examples.eval.parsii.provider&lt;/artifactId&gt;
		&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
	&lt;/dependency&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;org.osgi&lt;/groupId&gt;
		&lt;artifactId&gt;osgi.enroute.examples.eval.command&lt;/artifactId&gt;
		&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
	&lt;/dependency&gt;		
	&lt;dependency&gt;
		&lt;groupId&gt;org.osgi&lt;/groupId&gt;
		&lt;artifactId&gt;osgi.enroute.examples.eval.application&lt;/artifactId&gt;
		&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
	&lt;/dependency&gt;		
    &lt;dependency&gt;
            &lt;groupId&gt;org.osgi&lt;/groupId&gt;
            &lt;artifactId&gt;osgi.enroute.pom.distro&lt;/artifactId&gt;
            &lt;version&gt;2.0.0&lt;/version&gt;
    &lt;/dependency&gt;
	&lt;dependency&gt;
	    &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;
	    &lt;artifactId&gt;org.apache.felix.gogo.shell&lt;/artifactId&gt;
	    &lt;version&gt;1.0.0&lt;/version&gt;
	&lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre></div></div>

<p>Then add the new <code class="highlighter-rouge">-runrequires</code> for the application:</p>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bndrun $ vi osgi.enroute.examples.eval.bndrun
// Update -runrequires
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-runrequires: \
	osgi.identity;filter:='(osgi.identity=osgi.enroute.examples.eval.parsii.provider)',\
	osgi.identity;filter:='(osgi.identity=org.apache.felix.gogo.shell)',\
	osgi.identity;filter:='(osgi.identity=org.apache.felix.gogo.command)',\
	osgi.identity;filter:='(osgi.identity=osgi.enroute.examples.eval.command)',\
	osgi.identity;filter:='(osgi.identity=osgi.enroute.examples.eval.application)'
</code></pre></div></div>

<p>Then run <code class="highlighter-rouge">mvn install</code> to get the new list of <code class="highlighter-rouge">-runbundles</code>. This will give us a much larger
list because we now get all the web support:</p>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bndrun $ mvn install
...
-runbundles: \
	org.apache.felix.configadmin;version='[1.8.8,1.8.9)',\
	org.apache.felix.gogo.command;version='[0.16.0,0.16.1)',\
	org.apache.felix.gogo.runtime;version='[0.16.2,0.16.3)',\
	org.apache.felix.log;version='[1.0.1,1.0.2)',\
	org.apache.felix.scr;version='[2.0.2,2.0.3)',\
	org.eclipse.equinox.metatype;version='[1.4.100,1.4.101)',\
	org.osgi.service.metatype;version='[1.3.0,1.3.1)',\
	osgi.enroute.examples.eval.command;version='[1.0.0,1.0.1)',\
	osgi.enroute.examples.eval.parsii.provider;version='[1.0.0,1.0.1)',\
	org.apache.felix.gogo.shell;version='[2.0.0,2.0.1)',\
	org.apache.felix.http.jetty;version='[3.2.0,3.2.1)',\
	org.apache.felix.http.servlet-api;version='[1.1.2,1.1.3)',\
	org.eclipse.equinox.coordinator;version='[1.3.100,1.3.101)',\
	org.eclipse.equinox.event;version='[1.3.100,1.3.101)',\
	org.osgi.service.event;version='[1.3.1,1.3.2)',\
	osgi.enroute.configurer.simple.provider;version='[2.0.0,2.0.1)',\
	osgi.enroute.dtos.bndlib.provider;version='[2.0.0,2.0.1)',\
	osgi.enroute.examples.eval.application;version='[1.0.0,1.0.1)',\
	osgi.enroute.executor.simple.provider;version='[1.0.0,1.0.1)',\
	osgi.enroute.google.angular.webresource;version='[1.5.7,1.5.8)',\
	osgi.enroute.logger.simple.provider;version='[2.0.0,2.0.1)',\
	osgi.enroute.rest.simple.provider;version='[2.0.0,2.0.1)',\
	osgi.enroute.twitter.bootstrap.webresource;version='[3.3.5,3.3.6)',\
	osgi.enroute.web.simple.provider;version='[2.0.0,2.0.1)'
...
</code></pre></div></div>

<p>Add the new <code class="highlighter-rouge">-runbundles</code> to the <code class="highlighter-rouge">bndrun</code> file and run <code class="highlighter-rouge">mvn install</code> again.</p>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bndrun $ vi osgi.enroute.examples.eval.bndrun
// Update the -runbundles
bndrun $ mvn install
...
bndrun $ java -jar osgi.enroute.examples.eval.jar
2016-10-04 11:44:50.960:INFO::main: Logging initialized @673ms
2016-10-04 11:44:50.989:WARN:oejs.session:main: Sessions created by this manager are immortal (default maxInactiveInterval={})0
2016-10-04 11:44:50.992:INFO:oejs.Server:main: jetty-9.3.8.v20160314
2016-10-04 11:44:51.029:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@1757cd72{/,null,AVAILABLE}
2016-10-04 11:44:51.030:INFO:oejs.Server:main: Started @742ms
2016-10-04 11:44:51.049:INFO:oejs.ServerConnector:main: Started ServerConnector@68c72235{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}
             ____             _       
   ___ _ __ |  _ \ ___  _   _| |_ ___ 
  / _ \ '_ \| |_) / _ \| | | | __/ _ \
 |  __/ | | |  _ &lt; (_) | |_| | |_  __/
  \___|_| |_|_| \_\___/ \__,_|\__\___|
              http://enroute.osgi.org/

              
G! 	
</code></pre></div></div>

<p>The output from Gogo and the log can be garbled.</p>

<p>We can now open a browser on <a href="http://localhost:8080/osgi.enroute.examples.eval">http://localhost:8080/osgi.enroute.examples.eval</a></p>

<p>What we get is the home page of our application, with a text entry field to try out the expression evaluator!</p>

<h2 id="index">Index</h2>

<p>If you go to the root of the webserver you get an empty page. It is possible to get the active web application(s) listed here. 
For this, we need to add some metadata to the application project.</p>

<div class="shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bndrun $ cd ../application
application $ vi bnd.bnd
// Add the following content
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Bundle-Description: \
	Provides a Web based application to evaluate the evaluator
	
EnRoute-Application: 	osgi.enroute.examples.eval

-includeresource: \
   {static/osgi.enroute.examples.eval/index.html=\
   	src/main/resources/static/osgi.enroute.examples.eval/index.html}
</code></pre></div></div>

<p>If we now build and then run again then we should see the application
listed on the home page.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>application $ mvn install
...
application $ cd ../bndrun
bndrun $ mvn install
bndrun $ java -jar osgi.enroute.examples.eval.jar
...
</code></pre></div></div>

<p>This list is created  by the web server if nothing else
is registered at the root. This list looks like:</p>

<p><img src="img/index.png" alt="OSGi enRoute Index" /></p>

<p>Click on the link and you should get the application in the browser.</p>

<p>We can now open a browser on <a href="http://localhost:8080">http://localhost:8080</a> to try this out.</p>


		    </div>
			<div class="col hide-on-med-and-down l2">
				<div id="toc-wrapper" class="toc-wrapper pin-top">
				  <ul id="toc" class="section table-of-contents">
					
				  </ul>
				</div>
			</div>
			
			
				
				<div class="col s6 left-align hide-on-large-only show-on-med-and-down"><a href="dependencies.html"><i class="large material-icons">keyboard_arrow_left</i></a></div>
			
			
				<div class="col s6  right-align hide-on-large-only show-on-med-and-down"><a href="testing.html"><i class="large material-icons">keyboard_arrow_right</i></a></div>
			
			
			
				<div class="prev-nav hide-on-med-and-down"><a href="dependencies.html"><i class="small material-icons">keyboard_arrow_left</i></a></div>
			
			
				<div class="next-nav hide-on-med-and-down"><a href="testing.html"><i class="small material-icons">keyboard_arrow_right</i></a></div>
			
		
			
    </div> 
	
  </div>
  </main>
	<footer class="page-footer">
    <!--<div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5>Lorem Ipsum</h5>
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
      </div>
    </div>-->
    <div class="footer-copyright">
        <div class="container">
            <div>
				<span style="text-align: left; float: left; width: 30%;">
				Made with <a target="_blank" href="http://materializecss.com">Materialize</a>
				</span>
				<span style="text-align: center; float: left; width: 40%;">
				Copyright © 2018 <a href="https://twitter.com/SanfteSchorle">Thomas Driessen</a>
				</span>
                <span style="text-align: right; float: left; width: 30%;">
				Powered by <a target="_blank" href="http://jekyllrb.com/">Jekyll</a>
                </span>
            </div>
        </div>
    </div>
</footer>      
	<!--  Scripts-->  

<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/materialize.min.js"></script>
<script src="/assets/js/init.js"></script>	
	<script src="/assets/js/content.js"></script>	
  </body>

</html>