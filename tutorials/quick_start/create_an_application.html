<!DOCTYPE html>
<html lang="en"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
    <title>Creating an Application</title>
    <meta name="description" content="Creating an Application" />
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen,projection" href="/assets/materialize.css" />
    <link rel="canonical" href="http://localhost:4000/tutorials/quick_start/create_an_application.html" />
    <link rel="alternate" type="application/rss+xml" title="modularcode" href="/feed.xml" />
    
</head>
<!-- Is it a content or a nested page -->
	
	
	
	<style>a {color: #757575;fill:#424242;}a:hover {color: #03a9f4;fill:#03a9f4;}h1,h2,h3,h4,h5,h6{color: #424242;}body{color: #212121; display: flex; min-height: 100vh; flex-direction: column;}nav ul a{color: #424242;}nav .brand-logo{color: #424242}.justify-align{text-align:justify;}nav a{color: #424242;}main{flex: 1 0 auto;}.side-nav li>a{color: #424242;}.side-nav .collapsible-header, .side-nav.fixed .collapsible-header{padding-left:32px;}.side-nav .collapsible-body li a, .side-nav.fixed .collapsible-body li a{padding-left:47px;}h1,h2,h3,h4,h5,h6{-webkit-font-smoothing: antialiased;}.icon-block{padding: 0 15px;}.icon-block .material-icons{font-size: inherit;}.row{margin-bottom:0px;}.logo img{padding-top:3px;}.page-footer{background-color:#03a9f4; padding-top: 0px;}.nav-button{width:20px; height:20px; viewBox:0 0 20 20;}footer h5{color:#FFFFFF;}hr{background-color:#bdbdbd;}.divider{background-color:#bdbdbd;}img{max-width: 100%; height: auto;}.page-footer .footer-copyright{background-color:#03a9f4;}/* Code Highlighting */.highlight .c { color: #bdbdbd; font-style: italic } /* Comment */.highlight .k { color: #212121; font-weight: bold } /* Keyword */.highlight .cm { color: #bdbdbd; font-style: italic } /* Comment.Multiline */.highlight .c1 { color: #bdbdbd; font-style: italic } /* Comment.Single */.highlight .kc { color: #424242; font-weight: bold } /* Keyword.Constant */.highlight .kd { color: #212121; font-weight: bold } /* Keyword.Declaration */.highlight .kn { color: #424242; font-weight: bold } /* Keyword.Namespace */.highlight .kp { color: #424242; font-weight: bold } /* Keyword.Pseudo */.highlight .kr { color: #424242; font-weight: bold } /* Keyword.Reserved */.highlight .kt { color: #424242; font-weight: bold } /* Keyword.Type */.highlight .s { color: #757575 } /* Literal.String */.highlight .n { color: #03a9f4 } /* Name */.highlight .na { color: #03a9f4 } /* Name.Attribute */.highlight .nc { color: #03a9f4} /* Name.Class */.highlight .nd { color: #757575 } /* Name.Decorator */.highlight .nf { color: #03a9f4 } /* Name.Function */.highlight .mf { color: #757575 } /* Literal.Number.Float */.highlight .mh { color: #757575 } /* Literal.Number.Hex */.highlight .mi { color: #757575 } /* Literal.Number.Integer */.highlight .mo { color: #757575 } /* Literal.Number.Oct */.highlight .sb { color: #757575 } /* Literal.String.Backtick */.highlight .sc { color: #757575 } /* Literal.String.Char */.highlight .sd { color: #757575 } /* Literal.String.Doc */.highlight .s2 { color: #757575 } /* Literal.String.Double */.highlight .se { color: #757575 } /* Literal.String.Escape */.highlight .sh { color: #757575 } /* Literal.String.Heredoc */.highlight .si { color:#757575 } /* Literal.String.Interpol */.highlight .sx { color: #757575 } /* Literal.String.Other */.highlight .sr { color: #757575 } /* Literal.String.Regex */.highlight .s1 { color: #757575 } /* Literal.String.Single */.highlight .ss { color: #757575 } /* Literal.String.Symbol */.highlight {tab-size: 4;}div.highlighter-rouge{padding:5px;background:#f5f5f5;border:1px solid #bdbdbd;border-radius:4px;}div.highlight pre.highlight{margin:0px;}code.highlighter-rouge{padding:0px 3px;background:#f5f5f5;border:1px solid #bdbdbd;border-radius:3px;}/* Make headers a little bit smaller */h1{font-size:2.8rem;}h2{font-size:2.5rem;}h3{font-size:2.1rem;}h4{font-size:1.8rem;}h5{font-size:1.3rem;}h6{font-size:1rem;}/* Plain text */p{text-align:justify;}/* Blockquotes */blockquote{border-left:3px solid #03a9f4;font-style:italic;font-weight:300;}/* Tables */table.striped>tbody>tr:nth-child(odd){background-color:#f5f5f5;}/* Cards */.card .card-image .card-title{color: #212121; font-weight: 600; padding-bottom: 0px; padding-left:12px; padding-right: 12px;}.card-content{color: #757575;}.card .card-content{padding-top: 5px;}.card .card-action a:not(.btn):not(.btn-large):not(.btn-large):not(.btn-floating){color: #424242;}.card .card-action a:not(.btn):not(.btn-large):not(.btn-large):not(.btn-floating):hover{color: #03a9f4;}.card.small{height: 225px;}.card-placeholder-image{color:#bdbdbd;}.card-image img{opacity: 0.3;}.card-image h2{opacity: 0.3;}.card .card-image{min-height:60%;}/* Breadcrumbs */nav{background-color: #FFFFFF;}a.breadcrumb{color: #757575;}.breadcrumb:last-child{color:#03a9f4;}.breadcrumb:before{color:#757575;font-size:15px;}nav.breadcrumbs{box-shadow:none;margin-top:4px;}ul.collapsible{list-style-type: none;padding:0px;}.collapsible-header{border-bottom:0px;}.collapsible-body{padding:5px;}/* Table of Contents */.second-level{padding:0px;}.table-of-contents .second-level a{padding-left:40px;font-size:13px;}.table-of-contents a{color:#757575;}.table-of-contents a:hover{border-left:1px solid #03a9f4;color:#03a9f4;}.table-of-contents a.active{border-left:2px solid #03a9f4;color:#757575;}.toc-wrapper li{padding:1px;}/* Navigation Arrows */.prev-nav{top: 50%;left: 3%;position:fixed;}.next-nav{top: 50%;right: 3%;position:fixed;}</style>

  <body>
	<!-- Navigation Header -->
	<nav class="white lighten-1" role="navigation">
	<div class="nav-wrapper container">
		<a id="logo-container" class="brand-logo logo show-on-medium-and-up hide-on-small-only" href="/"><img src="/logo.png"></a>
		<a id="logo-container" class="brand-logo logo show-on-small hide-on-med-and-up" href="/"><img src="/logo-small.png"></a>
	  
	  
	
	  <ul class="right hide-on-med-and-down">
		
			
			<li><a href="/tutorials.html">Tutorials</a></li>
		
			
			<li><a href="/modules.html">Modules</a></li>
		
			
			<li><a href="/projects.html">Projects</a></li>
		
			
			<li><a href="/contribute.html">Contribute</a></li>
		
		
			<li>
				<a title="modularcode.site on GitHub" href="https://github.com/Sandared/modularcode.site"> 
					<svg class="nav-button" xmlns="http://www.w3.org/2000/svg">
						<title>github</title>
						<path d="M10 0C4.477 0 0 4.477 0 10c0 4.418 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.268 2.75 1.026A9.578 9.578 0 0 1 10 4.836c.85.004 1.705.114 2.504.337 1.909-1.294 2.747-1.026 2.747-1.026.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.579.688.481C17.137 18.163 20 14.418 20 10c0-5.523-4.478-10-10-10" fill-rule="evenodd">
						</path>
					</svg>					
				</a>
			</li>
		
		
		
			<li>
				<a title="SanfteSchorle on Twitter" href="https://twitter.com/SanfteSchorle"> 
					<svg class="nav-button" xmlns="http://www.w3.org/2000/svg">
						<title>twitter</title>
						<path d="M15.115 7.788c.005.11.009.223.009.335 0 3.43-2.611 7.384-7.386 7.384-1.467 0-2.831-.43-3.98-1.166a5.244 5.244 0 0 0 3.843-1.075 2.596 2.596 0 0 1-2.424-1.801 2.645 2.645 0 0 0 1.171-.045 2.597 2.597 0 0 1-2.082-2.544v-.033c.351.194.752.311 1.177.324a2.59 2.59 0 0 1-1.154-2.16c0-.475.127-.92.35-1.305A7.37 7.37 0 0 0 9.99 8.414a2.596 2.596 0 0 1 4.423-2.367 5.174 5.174 0 0 0 1.648-.63 2.602 2.602 0 0 1-1.142 1.436 5.17 5.17 0 0 0 1.491-.41 5.233 5.233 0 0 1-1.295 1.345M10 0C4.486 0 0 4.486 0 10s4.486 10 10 10 10-4.486 10-10S15.514 0 10 0" fill-rule="evenodd">
						</path>
					</svg>			
				</a>
			</li>
		
	  </ul>

	  <ul id="nav-mobile" class="side-nav">
		<li><a href="http://localhost:4000">Home</a></li>
		<li class="divider"></li>
		
			
			<li><a href="/tutorials.html">Tutorials</a></li>
			<li class="divider"></li>
		
			
			<li><a href="/modules.html">Modules</a></li>
			<li class="divider"></li>
		
			
			<li><a href="/projects.html">Projects</a></li>
			<li class="divider"></li>
		
			
			<li><a href="/contribute.html">Contribute</a></li>
			<li class="divider"></li>
		
		
			<li>
				<a title="modularcode.site on GitHub" href="https://github.com/Sandared/modularcode.site"> 
					<svg class="nav-button" xmlns="http://www.w3.org/2000/svg">
						<title>github</title>
						<path d="M10 0C4.477 0 0 4.477 0 10c0 4.418 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.268 2.75 1.026A9.578 9.578 0 0 1 10 4.836c.85.004 1.705.114 2.504.337 1.909-1.294 2.747-1.026 2.747-1.026.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.579.688.481C17.137 18.163 20 14.418 20 10c0-5.523-4.478-10-10-10" fill-rule="evenodd">
						</path>
					</svg>					
				</a>
			</li>
			<li class="divider"></li>
		
		
		
			<li>
				<a title="SanfteSchorle on Twitter" href="https://twitter.com/SanfteSchorle"> 
					<svg class="nav-button" xmlns="http://www.w3.org/2000/svg">
						<title>twitter</title>
						<path d="M15.115 7.788c.005.11.009.223.009.335 0 3.43-2.611 7.384-7.386 7.384-1.467 0-2.831-.43-3.98-1.166a5.244 5.244 0 0 0 3.843-1.075 2.596 2.596 0 0 1-2.424-1.801 2.645 2.645 0 0 0 1.171-.045 2.597 2.597 0 0 1-2.082-2.544v-.033c.351.194.752.311 1.177.324a2.59 2.59 0 0 1-1.154-2.16c0-.475.127-.92.35-1.305A7.37 7.37 0 0 0 9.99 8.414a2.596 2.596 0 0 1 4.423-2.367 5.174 5.174 0 0 0 1.648-.63 2.602 2.602 0 0 1-1.142 1.436 5.17 5.17 0 0 0 1.491-.41 5.233 5.233 0 0 1-1.295 1.345M10 0C4.486 0 0 4.486 0 10s4.486 10 10 10 10-4.486 10-10S15.514 0 10 0" fill-rule="evenodd">
						</path>
					</svg>			
				</a>
			</li>
			<li class="divider"></li>
		
	  </ul>        

	  <a data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
	</div>
</nav>
	
	
	
  <main>	
  <div class="container">
		<div class="row">	
		
			<div id="text-content" class="section col s12 l10">
				


<nav class="breadcrumbs">
	<div class="nav-wrapper">
	
	
		
	
		
			
			
			
			
			
							
				
				
							
				
				
							
				
				
			
				
					
					<a href="http://localhost:4000/tutorials.html" class="breadcrumb">Tutorials</a>
				
			
		
	
		
			
			
			
			
			
							
				
				
							
				
				
							
				
				
					
				
				<a href="http://localhost:4000/tutorials/quick_start.html" class="breadcrumb">Quick Start</a>
				
			
		
	
		
			
			
			
			
			
							
				
				
							
				
				
							
				
				
					
				
				<a href="http://localhost:4000/tutorials/quick_start/create_an_application.html" class="breadcrumb">Creating an Application</a>
				
			
		
	
	</div>
</nav>

				<h1 id="creating-an-application">Creating an Application</h1>

<h2 id="what-to-do">What To Do</h2>
<p>In the previous section we created a fresh clean OSGi enRoute workspace in <code class="highlighter-rouge">~/git/com.acme.prime</code> and selected the <code class="highlighter-rouge">Bndtools</code> perspective. In this section we’re going to create an application project in this workspace that will run inside an OSGi framework. This ‘application’ will provide a web user interface based on Google’s <a href="https://angularjs.org/">Angular JS</a> and Twitter’s <a href="http://getbootstrap.com/">Bootstrap</a>. We will use the OSGi enRoute built-in template since this is setup to provide exactly that (coincidence of course!).</p>

<h2 id="create-bndtools-project">Create bndtools Project</h2>
<p>So let’s get started by creating a new Bndtools Project. Select <code class="highlighter-rouge">File/New/Bndtools OSGi Project</code>.</p>

<p class="warning">Over time the menu system can have small changes. Variations seen are <code class="highlighter-rouge">Bnd OSGi Project</code> and <code class="highlighter-rouge">Bndtools Project</code>.</p>

<p><img src="img/app-create-0.png" alt="Create Application Project" /></p>

<p>This will open a wizard where we select the <em>template</em>. For this tutorial, it is mandatory to use the OSGi enRoute template since our workspace is not setup for the other templates. The OSGi enRoute templates create specific project types based on the suffix of the project name. In this case we create an application project.</p>

<p><img src="img/app-create-1.png" alt="Create Application Project" /></p>

<p>Now naming is important and we’ve found that using Java package like names that use the workspace name as a prefix works best for projects. So we pick <code class="highlighter-rouge">com.acme.prime.upper.application</code>. For OSGi enRoute, this <code class="highlighter-rouge">.application</code> suffix is <em>crucial</em> since it defines the template we will use. So in the first page we enter this name.</p>

<p><img src="img/app-create-2.png" alt="Select the OSGi enRoute template" /></p>

<p>Select <code class="highlighter-rouge">Next</code> to go to the Java settings page, which should not change since OSGi enRoute has already set this up.</p>

<p><img src="img/app-create-3.png" alt="Select the OSGi enRoute template" /></p>

<p>So we can just click <code class="highlighter-rouge">Finish</code> and get it over with.</p>

<h2 id="code">Code</h2>

<p>The OSGi enRoute template has already created some source code for us. This source code is making a single page web-application. So double click on the <code class="highlighter-rouge">UpperApplication.java</code> source file to open the Java editor to see what kind of code we need.</p>

<p><img src="img/upper-0.png" alt="The UpperApplication source code" /></p>

<p>So what’s in there? The first thing you will see is a number of annotations. They ensure that we include the proper web resources for our application like Angular, Bootstrap, and the web extender that serves our static pages. Then we have the component annotation that makes this object a Declarative Services <em>service component</em>. A service component is automatically  registered as a service when it implements an interface and it can depend on other services.</p>

<p>This <code class="highlighter-rouge">UpperApplication</code> component implements the <em>REST</em> interface and is thus registered as a <em>REST</em> service. The contract of this service indicates that any public method in this class becomes available as a REST end-point. The <code class="highlighter-rouge">getUpper</code> method is for the <code class="highlighter-rouge">GET</code> method (duh, it starts with <code class="highlighter-rouge">get</code>. If you want a <code class="highlighter-rouge">POST</code> call it <code class="highlighter-rouge">postUpper</code>) and it is mapped from the <code class="highlighter-rouge">/rest/upper</code> URI. Since it accepts a single argument, we can specify the word we want to upper case as <code class="highlighter-rouge">/rest/upper/&lt;word&gt;</code>. You can find more information about the REST API in the <a href="/services/osgi.enroute.rest.api.html">service catalog</a></p>

<p class="warning">REST methods are called from an untrusted external source so they should be protected by a check for authorization.</p>

<p class="note">The OSGi enRoute REST support is intended for calling your app from a browser. If you must implement
a complex REST API then it might be better to use JAX-RS. The OSGi is in the process of standardizing
a service API for JAX-RS.</p>

<h2 id="html-resources">HTML Resources</h2>

<p>Since this is a single page web app we also need some static resources for the Javascript code and CSS.</p>

<p>The resources from this application are stored in the <code class="highlighter-rouge">static</code> directory which is included in our bundle. These resources are directly mapped to the root. That is, a resource with the path <code class="highlighter-rouge">static/abc/def</code> will be available as <code class="highlighter-rouge">/abc/def</code>. The recommendation is to create a static direction with the application PID name in <code class="highlighter-rouge">static</code>.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>static/
	com.acme.prime.upper
		index.html
	...
</code></pre></div></div>

<p>The <code class="highlighter-rouge">static/com.acme.prime.upper/index.html</code> contains the single page HTML root. It defines a header, view area, and a footer. The <code class="highlighter-rouge">com.acme.prime.upper/main/htm</code> directory contains <em>html fragments</em> that are inserted in the main page depending on the URI. Take a look at these resources and notice how these resources can use macros from the build environment.</p>

<h2 id="automatic-resources">Automatic Resources</h2>

<p>In the Java code we require several Javascript resources and CSS resources. If you look in the <code class="highlighter-rouge">index.html</code> file you see entries like:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;link</span>
	<span class="na">rel=</span><span class="s">"stylesheet"</span>
	<span class="na">type=</span><span class="s">"text/css"</span>
	<span class="na">href=</span><span class="s">"/osgi.enroute.webresource/${bsn}/${Bundle-Version}/*.css"</span><span class="nt">&gt;</span>

<span class="nt">&lt;script
	</span><span class="na">src=</span><span class="s">"/osgi.enroute.webresource/${bsn}/${Bundle-Version}/*.js"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>OSGi enRoute will automatically insert any CSS or Javascript code in these places that your bundle requires through the annotation. Additionally, at the and it will add any such code in your bundle’s <code class="highlighter-rouge">web</code> directory.</p>

<p>We won’t go into more detail now because we just want to see it run! Understanding is a lot easier when you see it all run.</p>

<h2 id="defining-a-runtime">Defining a Runtime</h2>

<p>Double click on the <code class="highlighter-rouge">com.acme.prime.upper.bndrun</code> file and select the <code class="highlighter-rouge">Run</code> tab. In this tab we can express the requirements we have on the runtime. Since we specified our requirements via the annotations, we’re good to go as long as our application is listed in the initial requirements. This is the case by default. You could add any of the other bundles listed on the left side as a requirement but lets assume we’re good for now.</p>

<p><img src="img/resolve-initial-0.png" alt="Runtime Requirements" /></p>

<p>So hit the <code class="highlighter-rouge">Resolve</code> button. This will open a dialog that shows you what bundles are required in runtime.</p>

<p><img src="img/resolve-initial-1.png" alt="Resolved set" /></p>

<p>Clicking <code class="highlighter-rouge">Finish</code> will set the <code class="highlighter-rouge">Run Bundles</code> list. This list is normally not visible. Open it if you’d like to see the resulting bundles.</p>

<p><img src="img/resolve-initial-2.png" alt="Resolved set" /></p>

<p>Note that every time you resolve, the <code class="highlighter-rouge">-runbundles</code> are overwritten with the new resolution. So <strong>never</strong> add bundles directly to the <code class="highlighter-rouge">-runbundles</code> if you use the resolver!</p>

<p>Save the <code class="highlighter-rouge">com.acme.prime.upper.bndrun</code> file and then click on the <code class="highlighter-rouge">Debug OSGi</code> button at the right top of the window.</p>

<p><img src="img/run-buttons-0.png" alt="Resolved set" /></p>

<p>You are app is running and waiting for customers to enjoy the terrific upper casing:</p>

<p><a href="http://localhost:8080/com.acme.prime.upper">http://localhost:8080/com.acme.prime.upper</a>!</p>

<p>Just click on the ‘To Upper!’ button. This will ask you for a word and then prints the result in the alert bar.</p>

<p><img src="img/app-0.png" alt="The Application" /></p>

<h2 id="debugging">Debugging</h2>

<p>Of course you will never need to debug OSGi enRoute projects since they are by definition perfect! However, since perfection isn’t what it used to be, let’s see how we can do some debugging in this project.</p>

<p>You can debug this project as you can any other project in Java. You can set breakpoints and single step. There is one difference with more traditional Java. In our case, we generate a bundle that gets deployed on every change we make. If you change some code and save it, a new bundle will get deployed. If you get more requirements in the <code class="highlighter-rouge">bndrun</code> file, those new bundles will be deployed or no longer necessary bundles get removed. This works so well that the dialog box that Eclipse sometimes pops up to tell you it could not patch the class files can be ignored because bnd does not rely on this patching.</p>

<p><img src="img/debug-patch-0.png" alt="Resolved set" /></p>

<p>So just click the check-box and dismiss this dialog. That out of the way, let’s change our code from making this upper case code to return lower case code. (Don’t kill the running framework.)</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">String</span> <span class="nf">getUpper</span><span class="o">(</span><span class="n">RESTRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">String</span> <span class="n">string</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
	<span class="k">return</span> <span class="n">string</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>
<p>If there are Javascript or html fragment changes, you need to refresh the page in the browser to reload. Otherwise you can just click the button on your browser and try it out. You actually rarely have to restart the framework.</p>

<h2 id="osgi-details">OSGi Details</h2>

<p>We’re running in a framework but there is not much to see of the framework yet. Obviously, we will need tools to see what bundles are running and what services are registered. Well, every application project has a basic <code class="highlighter-rouge">bndrun</code> file and a <code class="highlighter-rouge">debug.bndrun</code> file. The <code class="highlighter-rouge">debug.bndrun</code> file inherits from the basic one but it adds a lot of support to look inside the framework.</p>

<p>Let’s first kill our running framework. Just click the red button on the console view. Also, if you’ve done some debugging, you might want to return to the Bndtools perspective.</p>

<p>Then double click the <code class="highlighter-rouge">debug.bndrun</code> file and select the <code class="highlighter-rouge">Run</code> tab, then click on the <code class="highlighter-rouge">Resolve</code> button. This gives us a much larger list of bundles. The debug enRoute settings add Web Console, XRay, a web server etc. These are invaluable tools.</p>

<p>This window looks similar to the following picture. Note that there are no listed requirements because they are inherited from the <code class="highlighter-rouge">com.acme.prime.upper.bndrun</code> file.</p>

<p><img src="img/debug-details-0.png" alt="Resolved set" /></p>

<p>So save the <code class="highlighter-rouge">debug.bndrun</code> file and click <code class="highlighter-rouge">Debug OSGi</code>. First, this <code class="highlighter-rouge">bndrun</code> file will run in trace mode. (You can control this through the <code class="highlighter-rouge">-runtrace</code> property that you can see when you double click the <code class="highlighter-rouge">debug.bndrun</code> file and select the <code class="highlighter-rouge">Source</code> tab.) In trace mode, the launcher provides detailed information about the launch process as well the ongoing update process when there are changed in bndtools.</p>

<p>Anyway, we now have the unsurpassed <a href="http://felix.apache.org/documentation/subprojects/apache-felix-web-console.html">Web Console</a> running with XRay. Just click on <a href="http://localhost:8080/system/console/xray">http://localhost:8080/system/console/xray</a>.</p>

<p>If you’re asked for your credentials, the Apache Felix boys have given you an unforgettable user id &amp; password:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>User id: 	admin
Password:	admin
</code></pre></div></div>
<p><img src="img/debug-xray-0.png" alt="Resolved set" /></p>

<p>In the full tutorial the possibilities of XRay are further explained.</p>

<h2 id="creating-an-executable">Creating an Executable</h2>

<p>The last part of this quick start is creating an executable JAR out of our application. The export facility of bnd(tools) makes it possible to create a JAR that contains all the dependencies, including the launcher and the framework. This is sometimes hard to understand for enterprise developer, that Java can actually run outside an application server!</p>

<p>Double click on the <code class="highlighter-rouge">com.acme.prime.upper.bndrun</code> file and select the <code class="highlighter-rouge">Run</code> tab.</p>

<p>At the top of this window you see the following buttons:</p>

<p><img src="img/run-buttons-0.png" alt="Run buttons" /></p>

<p>The <code class="highlighter-rouge">Export</code> button creates an executable JAR out of the specification of its corresponding <code class="highlighter-rouge">bndrun</code> file. The execution will be identical to when you run your code inside eclipse. So click on the <code class="highlighter-rouge">Export</code> button:</p>

<p><img src="img/export-0.png" alt="Resolved set" /></p>

<p>Click on <code class="highlighter-rouge">Next</code> to go to the wizard page that requests for the path to save the executable JAR at. Suggest you save it on the desktop under the name <code class="highlighter-rouge">com.acme.prime.upper.jar</code>:</p>

<p><img src="img/export-1.png" alt="Resolved set" /></p>

<p>Then we click <code class="highlighter-rouge">Finish</code>.</p>

<p>Make sure you have no more frameworks running. Since we have a webserver running we easily run in a conflict for the 8080 port number.</p>

<p>Let’s go to a shell to see if we can execute our code.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> ~/Desktop
<span class="nv">$ </span>java <span class="nt">-version</span>
java version <span class="s2">"1.8.0"</span>
Java<span class="o">(</span>TM<span class="o">)</span> SE Runtime Environment <span class="o">(</span>build 1.8.0-b132<span class="o">)</span>
Java HotSpot<span class="o">(</span>TM<span class="o">)</span> 64-Bit Server VM <span class="o">(</span>build 25.0-b70, mixed mode<span class="o">)</span>
<span class="nv">$ </span>java <span class="nt">-jar</span> com.acme.prime.upper.jar
</code></pre></div></div>

<p>We can now go to <a href="http://localhost:8080/com.acme.prime.upper">http://localhost:8080/com.acme.prime.upper</a> and see that our application also runs from the command line.</p>

<p>You can do Control-C in the shell to exit.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ java -jar com.acme.prime.upper.jar
^C
$
</code></pre></div></div>

		    </div>
			<div class="col hide-on-med-and-down l2">
				<div id="toc-wrapper" class="toc-wrapper pin-top">
				  <ul id="toc" class="section table-of-contents">
					
				  </ul>
				</div>
			</div>
			
			
				
				<div class="col s6 left-align hide-on-large-only show-on-med-and-down"><a href="workspace.html"><i class="large material-icons">keyboard_arrow_left</i></a></div>
			
			
				<div class="col s6  right-align hide-on-large-only show-on-med-and-down"><a href="exercise_service.html"><i class="large material-icons">keyboard_arrow_right</i></a></div>
			
			
			
				<div class="prev-nav hide-on-med-and-down"><a href="workspace.html"><i class="small material-icons">keyboard_arrow_left</i></a></div>
			
			
				<div class="next-nav hide-on-med-and-down"><a href="exercise_service.html"><i class="small material-icons">keyboard_arrow_right</i></a></div>
			
		
			
    </div> 
	
  </div>
  </main>
	<footer class="page-footer">
    <!--<div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5>Lorem Ipsum</h5>
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
      </div>
    </div>-->
    <div class="footer-copyright">
        <div class="container">
            <div>
				<span style="text-align: left; float: left; width: 30%;">
				Made with <a target="_blank" href="http://materializecss.com">Materialize</a>
				</span>
				<span style="text-align: center; float: left; width: 40%;">
				Copyright © 2018 <a href="https://twitter.com/SanfteSchorle">Thomas Driessen</a>
				</span>
                <span style="text-align: right; float: left; width: 30%;">
				Powered by <a target="_blank" href="http://jekyllrb.com/">Jekyll</a>
                </span>
            </div>
        </div>
    </div>
</footer>      
	<!--  Scripts-->  

<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/materialize.min.js"></script>
<script src="/assets/js/init.js"></script>	
	<script src="/assets/js/content.js"></script>	
  </body>

</html>