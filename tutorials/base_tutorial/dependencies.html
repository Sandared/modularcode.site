<!DOCTYPE html>
<html lang="en"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
    <title>Dependencies</title>
    <meta name="description" content="Dependencies" />
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen,projection" href="/assets/materialize.css" />
    <link rel="canonical" href="http://localhost:4000/tutorials/base_tutorial/dependencies.html" />
    <link rel="alternate" type="application/rss+xml" title="modularcode" href="/feed.xml" />
    
</head>
<!-- Is it a content or a nested page -->
	
	
	
	<style>a {color: #757575;fill:#424242;}a:hover {color: #03a9f4;fill:#03a9f4;}h1,h2,h3,h4,h5,h6{color: #424242;}body{color: #212121; display: flex; min-height: 100vh; flex-direction: column;}nav ul a{color: #424242;}nav .brand-logo{color: #424242}.justify-align{text-align:justify;}nav a{color: #424242;}main{flex: 1 0 auto;}.side-nav li>a{color: #424242;}.side-nav .collapsible-header, .side-nav.fixed .collapsible-header{padding-left:32px;}.side-nav .collapsible-body li a, .side-nav.fixed .collapsible-body li a{padding-left:47px;}h1,h2,h3,h4,h5,h6{-webkit-font-smoothing: antialiased;}.icon-block{padding: 0 15px;}.icon-block .material-icons{font-size: inherit;}.row{margin-bottom:0px;}.logo img{padding-top:3px;}.page-footer{background-color:#03a9f4; padding-top: 0px;}.nav-button{width:20px; height:20px; viewBox:0 0 20 20;}footer h5{color:#FFFFFF;}hr{background-color:#bdbdbd;}.divider{background-color:#bdbdbd;}img{max-width: 100%; height: auto;}.page-footer .footer-copyright{background-color:#03a9f4;}/* Code Highlighting */.highlight .c { color: #bdbdbd; font-style: italic } /* Comment */.highlight .k { color: #212121; font-weight: bold } /* Keyword */.highlight .cm { color: #bdbdbd; font-style: italic } /* Comment.Multiline */.highlight .c1 { color: #bdbdbd; font-style: italic } /* Comment.Single */.highlight .kc { color: #424242; font-weight: bold } /* Keyword.Constant */.highlight .kd { color: #212121; font-weight: bold } /* Keyword.Declaration */.highlight .kn { color: #424242; font-weight: bold } /* Keyword.Namespace */.highlight .kp { color: #424242; font-weight: bold } /* Keyword.Pseudo */.highlight .kr { color: #424242; font-weight: bold } /* Keyword.Reserved */.highlight .kt { color: #424242; font-weight: bold } /* Keyword.Type */.highlight .s { color: #757575 } /* Literal.String */.highlight .n { color: #03a9f4 } /* Name */.highlight .na { color: #03a9f4 } /* Name.Attribute */.highlight .nc { color: #03a9f4} /* Name.Class */.highlight .nd { color: #757575 } /* Name.Decorator */.highlight .nf { color: #03a9f4 } /* Name.Function */.highlight .mf { color: #757575 } /* Literal.Number.Float */.highlight .mh { color: #757575 } /* Literal.Number.Hex */.highlight .mi { color: #757575 } /* Literal.Number.Integer */.highlight .mo { color: #757575 } /* Literal.Number.Oct */.highlight .sb { color: #757575 } /* Literal.String.Backtick */.highlight .sc { color: #757575 } /* Literal.String.Char */.highlight .sd { color: #757575 } /* Literal.String.Doc */.highlight .s2 { color: #757575 } /* Literal.String.Double */.highlight .se { color: #757575 } /* Literal.String.Escape */.highlight .sh { color: #757575 } /* Literal.String.Heredoc */.highlight .si { color:#757575 } /* Literal.String.Interpol */.highlight .sx { color: #757575 } /* Literal.String.Other */.highlight .sr { color: #757575 } /* Literal.String.Regex */.highlight .s1 { color: #757575 } /* Literal.String.Single */.highlight .ss { color: #757575 } /* Literal.String.Symbol */.highlight {tab-size: 4;}div.highlighter-rouge{padding:5px;background:#f5f5f5;border:1px solid #bdbdbd;border-radius:4px;}div.highlight pre.highlight{margin:0px;}code.highlighter-rouge{padding:0px 3px;background:#f5f5f5;border:1px solid #bdbdbd;border-radius:3px;}/* Make headers a little bit smaller */h1{font-size:2.8rem;}h2{font-size:2.5rem;}h3{font-size:2.1rem;}h4{font-size:1.8rem;}h5{font-size:1.3rem;}h6{font-size:1rem;}/* Plain text */p{text-align:justify;}/* Blockquotes */blockquote{border-left:3px solid #03a9f4;font-style:italic;font-weight:300;}/* Tables */table.striped>tbody>tr:nth-child(odd){background-color:#f5f5f5;}/* Cards */.card .card-image .card-title{color: #212121; font-weight: 600; padding-bottom: 0px; padding-left:12px; padding-right: 12px;}.card-content{color: #757575;}.card .card-content{padding-top: 5px;}.card .card-action a:not(.btn):not(.btn-large):not(.btn-large):not(.btn-floating){color: #424242;}.card .card-action a:not(.btn):not(.btn-large):not(.btn-large):not(.btn-floating):hover{color: #03a9f4;}.card.small{height: 225px;}.card-placeholder-image{color:#bdbdbd;}.card-image img{opacity: 0.3;}.card-image h2{opacity: 0.3;}.card .card-image{min-height:60%;}/* Breadcrumbs */nav{background-color: #FFFFFF;}a.breadcrumb{color: #757575;}.breadcrumb:last-child{color:#03a9f4;}.breadcrumb:before{color:#757575;font-size:15px;}nav.breadcrumbs{box-shadow:none;margin-top:4px;}ul.collapsible{list-style-type: none;padding:0px;}.collapsible-header{border-bottom:0px;}.collapsible-body{padding:5px;}/* Table of Contents */.second-level{padding:0px;}.table-of-contents .second-level a{padding-left:40px;font-size:13px;}.table-of-contents a{color:#757575;}.table-of-contents a:hover{border-left:1px solid #03a9f4;color:#03a9f4;}.table-of-contents a.active{border-left:2px solid #03a9f4;color:#757575;}.toc-wrapper li{padding:1px;}/* Navigation Arrows */.prev-nav{top: 50%;left: 3%;position:fixed;}.next-nav{top: 50%;right: 3%;position:fixed;}</style>

  <body>
	<!-- Navigation Header -->
	<nav class="white lighten-1" role="navigation">
	<div class="nav-wrapper container">
		<a id="logo-container" class="brand-logo logo show-on-medium-and-up hide-on-small-only" href="/"><img src="/logo.png"></a>
		<a id="logo-container" class="brand-logo logo show-on-small hide-on-med-and-up" href="/"><img src="/logo-small.png"></a>
	  
	  
	
	  <ul class="right hide-on-med-and-down">
		
			
			<li><a href="/tutorials.html">Tutorials</a></li>
		
			
			<li><a href="/modules.html">Modules</a></li>
		
			
			<li><a href="/projects.html">Projects</a></li>
		
			
			<li><a href="/contribute.html">Contribute</a></li>
		
		
			<li>
				<a title="modularcode.site on GitHub" href="https://github.com/Sandared/modularcode.site"> 
					<svg class="nav-button" xmlns="http://www.w3.org/2000/svg">
						<title>github</title>
						<path d="M10 0C4.477 0 0 4.477 0 10c0 4.418 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.268 2.75 1.026A9.578 9.578 0 0 1 10 4.836c.85.004 1.705.114 2.504.337 1.909-1.294 2.747-1.026 2.747-1.026.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.579.688.481C17.137 18.163 20 14.418 20 10c0-5.523-4.478-10-10-10" fill-rule="evenodd">
						</path>
					</svg>					
				</a>
			</li>
		
		
		
			<li>
				<a title="SanfteSchorle on Twitter" href="https://twitter.com/SanfteSchorle"> 
					<svg class="nav-button" xmlns="http://www.w3.org/2000/svg">
						<title>twitter</title>
						<path d="M15.115 7.788c.005.11.009.223.009.335 0 3.43-2.611 7.384-7.386 7.384-1.467 0-2.831-.43-3.98-1.166a5.244 5.244 0 0 0 3.843-1.075 2.596 2.596 0 0 1-2.424-1.801 2.645 2.645 0 0 0 1.171-.045 2.597 2.597 0 0 1-2.082-2.544v-.033c.351.194.752.311 1.177.324a2.59 2.59 0 0 1-1.154-2.16c0-.475.127-.92.35-1.305A7.37 7.37 0 0 0 9.99 8.414a2.596 2.596 0 0 1 4.423-2.367 5.174 5.174 0 0 0 1.648-.63 2.602 2.602 0 0 1-1.142 1.436 5.17 5.17 0 0 0 1.491-.41 5.233 5.233 0 0 1-1.295 1.345M10 0C4.486 0 0 4.486 0 10s4.486 10 10 10 10-4.486 10-10S15.514 0 10 0" fill-rule="evenodd">
						</path>
					</svg>			
				</a>
			</li>
		
	  </ul>

	  <ul id="nav-mobile" class="side-nav">
		<li><a href="http://localhost:4000">Home</a></li>
		<li class="divider"></li>
		
			
			<li><a href="/tutorials.html">Tutorials</a></li>
			<li class="divider"></li>
		
			
			<li><a href="/modules.html">Modules</a></li>
			<li class="divider"></li>
		
			
			<li><a href="/projects.html">Projects</a></li>
			<li class="divider"></li>
		
			
			<li><a href="/contribute.html">Contribute</a></li>
			<li class="divider"></li>
		
		
			<li>
				<a title="modularcode.site on GitHub" href="https://github.com/Sandared/modularcode.site"> 
					<svg class="nav-button" xmlns="http://www.w3.org/2000/svg">
						<title>github</title>
						<path d="M10 0C4.477 0 0 4.477 0 10c0 4.418 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.268 2.75 1.026A9.578 9.578 0 0 1 10 4.836c.85.004 1.705.114 2.504.337 1.909-1.294 2.747-1.026 2.747-1.026.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.579.688.481C17.137 18.163 20 14.418 20 10c0-5.523-4.478-10-10-10" fill-rule="evenodd">
						</path>
					</svg>					
				</a>
			</li>
			<li class="divider"></li>
		
		
		
			<li>
				<a title="SanfteSchorle on Twitter" href="https://twitter.com/SanfteSchorle"> 
					<svg class="nav-button" xmlns="http://www.w3.org/2000/svg">
						<title>twitter</title>
						<path d="M15.115 7.788c.005.11.009.223.009.335 0 3.43-2.611 7.384-7.386 7.384-1.467 0-2.831-.43-3.98-1.166a5.244 5.244 0 0 0 3.843-1.075 2.596 2.596 0 0 1-2.424-1.801 2.645 2.645 0 0 0 1.171-.045 2.597 2.597 0 0 1-2.082-2.544v-.033c.351.194.752.311 1.177.324a2.59 2.59 0 0 1-1.154-2.16c0-.475.127-.92.35-1.305A7.37 7.37 0 0 0 9.99 8.414a2.596 2.596 0 0 1 4.423-2.367 5.174 5.174 0 0 0 1.648-.63 2.602 2.602 0 0 1-1.142 1.436 5.17 5.17 0 0 0 1.491-.41 5.233 5.233 0 0 1-1.295 1.345M10 0C4.486 0 0 4.486 0 10s4.486 10 10 10 10-4.486 10-10S15.514 0 10 0" fill-rule="evenodd">
						</path>
					</svg>			
				</a>
			</li>
			<li class="divider"></li>
		
	  </ul>        

	  <a data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
	</div>
</nav>
	
	
	
  <main>	
  <div class="container">
		<div class="row">	
		
			<div id="text-content" class="section col s12 l10">
				


<nav class="breadcrumbs">
	<div class="nav-wrapper">
	
	
		
	
		
			
			
			
			
			
							
				
				
							
				
				
							
				
				
			
				
					
					<a href="http://localhost:4000/tutorials.html" class="breadcrumb">Tutorials</a>
				
			
		
	
		
			
			
			
			
			
							
				
				
							
				
				
							
				
				
					
				
				<a href="http://localhost:4000/tutorials/base_tutorial.html" class="breadcrumb">Base Tutorial</a>
				
			
		
	
		
			
			
			
			
			
							
				
				
							
				
				
							
				
				
					
				
				<a href="http://localhost:4000/tutorials/base_tutorial/dependencies.html" class="breadcrumb">Dependencies</a>
				
			
		
	
	</div>
</nav>

				<h1 id="dependencies">Dependencies</h1>

<h2 id="what-you-will-learn-in-this-section">What You Will Learn in This Section</h2>

<p>In this section we look into how we can depend on other projects inside and outside our workspace. 
We introduce the <em>build path</em> and the repositories that come with your workspace.</p>

<h2 id="external-dependency">External Dependency</h2>

<p>There is a lot of code that we’re proud of but the <code class="highlighter-rouge">EvalImpl</code> class is not really 
one of them. To preserve our pride we could of course spent a couple of weeks and 
come with a new evaluator but why invent the wheel when large groups have already 
done that already untold times and make it amazingly gratis available for you?</p>

<p>However, that raises the question how to get this external dependency in in our 
build? Well, we should first search in our local repositories. At the left bottom 
of your Eclipse window there are is a list of repositories:</p>

<p><img src="img/dependencies-repo-0.png" alt="Repositories" /></p>

<p>Now there is a simple parser on Maven central that is quite nice for our purpose: <a href="https://github.com/scireum/parsii">PARSII</a> 
and has an MIT License. Would it not be nice if we could easily add this to our build 
path? So why not search for <code class="highlighter-rouge">PARSII</code> in the repositories view.</p>

<p>This comes up empty. What do we do? Well, we can search on <a href="http://search.maven.org/#search%7Cga%7C1%7Cparsii">search.maven.org</a></p>

<p><img src="img/dependencies-search-0.png" alt="Search on Maven" /></p>

<p>If we click on the version, we get the following window</p>

<p><img src="img/dependencies-search-1.png" alt="Search on Maven" /></p>

<p>We should now copy to the clip-board the Apache Maven dependency XML element.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.scireum<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>parsii<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.3<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<p>If look in the cnf folder then we see a file called <code class="highlighter-rouge">central.xml</code>. Double click on this
file and add the element coped to the clip board  into the <code class="highlighter-rouge">dependencies</code> element.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

	<span class="nt">&lt;groupId&gt;</span>local<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>central<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version&gt;</span>0.0.0<span class="nt">&lt;/version&gt;</span>

	<span class="nt">&lt;packaging&gt;</span>pom<span class="nt">&lt;/packaging&gt;</span>

	<span class="nt">&lt;dependencies&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>com.scireum<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>parsii<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;version&gt;</span>2.3<span class="nt">&lt;/version&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
	<span class="nt">&lt;/dependencies&gt;</span>

<span class="nt">&lt;/project&gt;</span>
</code></pre></div></div>

<p class="bug">Unfortunately the refresh has a bug. To see the dependency, you must for now<br />
make small change to the <code class="highlighter-rouge">build.bnd</code> file in <code class="highlighter-rouge">cnf</code> project. This will kick
the repository to properly refresh itself.</p>

<p>The repositories view is now updated and should look like:</p>

<p><img src="img/dependencies-search-2.png" alt="Search on Maven" /></p>

<h2 id="adding-to-build-path">Adding to Build Path</h2>

<p>We should first open the <code class="highlighter-rouge">bnd.bnd</code> file in the <code class="highlighter-rouge">com.acme.prime.eval.provider</code>
project and open the <code class="highlighter-rouge">Build</code> tab.</p>

<p><img src="img/dependencies-build-0.png" alt="Search on Maven" /></p>

<p>You can now drag the <code class="highlighter-rouge">com.scireum:parsii</code> entry and drop it on the build path, the
list with <code class="highlighter-rouge">osgi.enroute.base.api</code>. After you save the <code class="highlighter-rouge">bnd.bnd</code> file then the
Eclipse class path is automatically updated.</p>

<p><img src="img/dependencies-build-1.png" alt="Search on Maven" /></p>

<h2 id="updating-the-evalimpl-class">Updating the EvalImpl class</h2>

<p>Since now have the PARSII library on our build path, we can use it in our <code class="highlighter-rouge">EvalImpl</code> class. 
This small library significantly simplifies our code:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span><span class="o">(</span>
	<span class="n">name</span> <span class="o">=</span> <span class="s">"com.acme.prime.eval.simple"</span><span class="o">,</span> 
	<span class="n">property</span> <span class="o">=</span> <span class="o">{</span>
		<span class="n">Debug</span><span class="o">.</span><span class="na">COMMAND_SCOPE</span> <span class="o">+</span> <span class="s">"=test"</span><span class="o">,</span> 
		<span class="n">Debug</span><span class="o">.</span><span class="na">COMMAND_FUNCTION</span> <span class="o">+</span> <span class="s">"=eval"</span> 
	<span class="o">}</span>
<span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EvalImpl</span> <span class="kd">implements</span> <span class="n">Eval</span> <span class="o">{</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">double</span> <span class="nf">eval</span><span class="o">(</span><span class="n">String</span> <span class="n">expression</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">Parser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">expression</span><span class="o">).</span><span class="na">evaluate</span><span class="o">();</span>
	<span class="o">}</span>	
<span class="o">}</span>
</code></pre></div></div>

<p>When we save this class we suddenly get an error from the Eclipse console, s
omething like: ‘could not resolve …’. The big grey window that is yelling at 
you might be a bit annoying at first but we often went on a wild goose chase 
because we did not see the error in the console.</p>

<p>In retrospect we could have expected this error since we created an external 
dependency in our source which was satisfied by the build path but we did not 
add anything to the runtime.</p>

<h2 id="packaging">Packaging</h2>

<p>Back to the black art of packaging. Let’s see how our bundle is shaping up: 
click on <code class="highlighter-rouge">bnd.bnd</code> and then select the <code class="highlighter-rouge">Contents</code> tab. It is clear that this 
bundle cannot resolve because it imports the <code class="highlighter-rouge">parsii.eval</code> package; a package 
for which the runtime has no providing bundle.</p>

<p><img src="img/dependencies-pack-0.png" alt="Importing parsii" /></p>

<p>The bundle therefore looks like:</p>

<p><img src="img/dependencies-pack-1.png" alt="Importing parsii" /></p>

<p>We now have 2 options. We can add the PARSII bundle to the runtime or we can add 
the imported packages to our own bundle. What is best? In this case the answer is quite easy 
since the PARSII is actually not a bundle; it is only a simple JAR. You can verify 
this easily. Select the PARSII bundle in the respositories view under the Central 
repository (search for parsii). If you double click on the JAR it opens the 
JAR Viewer, and the manifest is shown.</p>

<p><img src="img/dependencies-pack-5.png" alt="Importing parsii" /></p>

<p>This rather meager manifest is not an OSGi manifest, ergo, this is not a bundle. 
So option 2, adding the packages to  the JAR is the best solution.</p>

<p>Go back to the <code class="highlighter-rouge">Contents</code> tab of the provider bundle. If you now drag the 
<code class="highlighter-rouge">parsii.eval</code> package from the Imported Packages list to the Private 
Packages list and save the <code class="highlighter-rouge">bnd.bnd</code> file then you see that a new import 
replaces the the <code class="highlighter-rouge">parsii.eval</code> package: <code class="highlighter-rouge">parsii.tokenizer</code>. You can now also 
drag this package to the Private Packages list but lets learn something new.</p>

<p>Adding these packages by hand can become tedious. So select the <code class="highlighter-rouge">Source</code> tab of the <code class="highlighter-rouge">bnd.bnd</code> editor:</p>

<p><img src="img/dependencies-pack-2.png" alt="Importing parsii" /></p>

<p>What you now see is the underlying <code class="highlighter-rouge">bnd.bnd</code> properties file; in bnd everything is a property! We can now replace the clause in the <code class="highlighter-rouge">Private-Package</code> header and use wildcards like <code class="highlighter-rouge">parsii.*</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Private-Package:  \
	com.acme.prime.eval.provider,\
	parsii.*
</code></pre></div></div>

<p>If you now save the <code class="highlighter-rouge">bnd.bnd</code> file and select the <code class="highlighter-rouge">Contents</code> tab you see that the imports have disappeared. Our provider bundle now looks like:</p>

<p><img src="img/dependencies-pack-3.png" alt="Importing parsii" /></p>

<p>Copying packages into your bundle from the class path often creates surprise, disgust and vomiting for the more traditional developers. For now you have to believe us that we do know why we break this taboo. it actually works quite well.</p>

<h2 id="playing">Playing</h2>

<p>Since there are now no longer any errors, we can now use our Gogo shell command to test out our efforts. We’re now no longer restricted by a single operation so can go wild and find answers to all the (mathematical) questions we always wanted to know but were afraid to ask:</p>

<div class="language-shell shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>g! <span class="nb">test</span>:eval pi
3.141592653589793
g! <span class="nb">test</span>:eval sin<span class="o">(</span>pi<span class="o">)</span>
1.2246467991473532E-16
g! <span class="nb">test</span>:eval sin<span class="o">(</span>1<span class="o">)</span><span class="k">*</span>sin<span class="o">(</span>1<span class="o">)</span>+cos<span class="o">(</span>1<span class="o">)</span><span class="k">*</span>cos<span class="o">(</span>1<span class="o">)</span>
1.0
</code></pre></div></div>

<p>There is a small chance that you did something different and that the you do not get the prompt. In that case, terminate the running process, goto the Run tab on the <code class="highlighter-rouge">bnd.bnd</code> file, and click <code class="highlighter-rouge">Run OSGi</code> again. If this does not resolve the issue, try the next step since this will add some debugging.</p>

<p>Otherwise, you can try the <a href="forum">Forum</a> (TODO: Mailingliste) and look for a good (technically educated) Samaritan to help you out.</p>

<h2 id="how-does-it-work">How Does it Work?</h2>

<p>The basic dependency model of bnd is based on the OSGi Bundle Symbolic Name (BSN). The Build Path, the Run Bundle and a number of other paths and bundles all specify their dependency on an OGSi bundle by declaring a BSN and an version range. These specifications are translated into actual JARs on the file system through <em>repositories</em>. A repository takes a request for a BSN and provides bnd with the versions available for that BSN, and can turn an actual BSN and version into a file. Repositories are <em>plugins</em>, that is they are not an intrinsic part of bnd. It is actually quite easy to write a repository that links to some external repository. The repositories that are loaded are visible in the repositories view in the left bottom.</p>

<p>In the enRoute project we have the following repositories:</p>

<ul>
  <li>Workspace – The workspace repository represents all the bundles in the workspace built by projects. You can add such bundles as a dependency to your project.</li>
  <li>Release – This is the repository where our final bundles are released in, you can find the storage of this repo in ./cnf/release</li>
  <li>Central (Maven) – This is a view on the Maven Central repository through a POM. You can find this file in <code class="highlighter-rouge">./cnf/central.xml</code>.</li>
</ul>

<p>We then added the packages from PARSII to our own bundle because the PARSII JAR was not a bundle. We could have 
turned it into a bundle, but copying the classes in your own bundle is ok as long as they are copied to the 
Private Package area. Private classes are never exposed to the outside and can not conflict with other bundles. 
It is important that you make sure none of the objects is in the public API in one of the exported packages. 
That is, if the Eval interface had a reference to for example the <code class="highlighter-rouge">parsii.eval.Parsers</code> class then we could not a
dd the packages from PARSII to our own bundle; it could cause really nasty OSGi errors. In general, bnd will notify 
you when that happens. In this case we’re ok since the PARSII JAR is fully encapsulated in our bundle.</p>


		    </div>
			<div class="col hide-on-med-and-down l2">
				<div id="toc-wrapper" class="toc-wrapper pin-top">
				  <ul id="toc" class="section table-of-contents">
					
				  </ul>
				</div>
			</div>
			
			
				
				<div class="col s6 left-align hide-on-large-only show-on-med-and-down"><a href="debug.html"><i class="large material-icons">keyboard_arrow_left</i></a></div>
			
			
				<div class="col s6  right-align hide-on-large-only show-on-med-and-down"><a href="testing.html"><i class="large material-icons">keyboard_arrow_right</i></a></div>
			
			
			
				<div class="prev-nav hide-on-med-and-down"><a href="debug.html"><i class="small material-icons">keyboard_arrow_left</i></a></div>
			
			
				<div class="next-nav hide-on-med-and-down"><a href="testing.html"><i class="small material-icons">keyboard_arrow_right</i></a></div>
			
		
			
    </div> 
	
  </div>
  </main>
	<footer class="page-footer">
    <!--<div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5>Lorem Ipsum</h5>
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
      </div>
    </div>-->
    <div class="footer-copyright">
        <div class="container">
            <div>
				<span style="text-align: left; float: left; width: 30%;">
				Made with <a target="_blank" href="http://materializecss.com">Materialize</a>
				</span>
				<span style="text-align: center; float: left; width: 40%;">
				Copyright © 2018 <a href="https://twitter.com/SanfteSchorle">Thomas Driessen</a>
				</span>
                <span style="text-align: right; float: left; width: 30%;">
				Powered by <a target="_blank" href="http://jekyllrb.com/">Jekyll</a>
                </span>
            </div>
        </div>
    </div>
</footer>      
	<!--  Scripts-->  

<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/materialize.min.js"></script>
<script src="/assets/js/init.js"></script>	
	<script src="/assets/js/content.js"></script>	
  </body>

</html>